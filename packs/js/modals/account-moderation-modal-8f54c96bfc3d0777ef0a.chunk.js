"use strict";(self.webpackChunksoapbox=self.webpackChunksoapbox||[]).push([[212],{1356:function(e,a,o){o.r(a),o.d(a,{default:function(){return A}});var s=o(1202),d=o(2111),t=o(1),n=o(2121),i=o(2122),r=o(2142),c=o(98),u=o(458),m=o(36),l=o(103),g=o(100),f=o(149),Z=o(895),_=o(2),v=o(3),M=o(34),h=o(111),p=o(507),b=(o(5),(0,n.vU)({placeholder:{id:"badge_input.placeholder",defaultMessage:"Enter a badgeâ€¦"}})),C=function(e){var a=e.badges,o=e.onChange,d=(0,i.Z)(),t=a.map(p.h2);return(0,s.Z)(_.EG,{tags:t,onChange:function(e){var a=e.map(p.JI);o(a)},placeholder:d.formatMessage(b.placeholder)})},w=o(638),T=(0,n.vU)({roleUser:{id:"account_moderation_modal.roles.user",defaultMessage:"User"},roleModerator:{id:"account_moderation_modal.roles.moderator",defaultMessage:"Moderator"},roleAdmin:{id:"account_moderation_modal.roles.admin",defaultMessage:"Admin"},promotedToAdmin:{id:"admin.users.actions.promote_to_admin_message",defaultMessage:"@{acct} was promoted to an admin"},promotedToModerator:{id:"admin.users.actions.promote_to_moderator_message",defaultMessage:"@{acct} was promoted to a moderator"},demotedToModerator:{id:"admin.users.actions.demote_to_moderator_message",defaultMessage:"@{acct} was demoted to a moderator"},demotedToUser:{id:"admin.users.actions.demote_to_user_message",defaultMessage:"@{acct} was demoted to a regular user"}}),U=function(e){var a=e.account,o=(0,i.Z)(),d=(0,v.TL)(),n=(0,t.useMemo)((function(){return{user:o.formatMessage(T.roleUser),moderator:o.formatMessage(T.roleModerator),admin:o.formatMessage(T.roleAdmin)}}),[]),r=function(e){return e.admin?"admin":e.moderator?"moderator":"user"}(a);return(0,s.Z)(w.Fj,{items:n,defaultValue:r,onChange:function(e){var s=e.target.value;d((0,c.gD)(a.id,s)).then((function(){var e;"admin"===s?e=T.promotedToAdmin:"moderator"===s&&a.admin?e=T.demotedToModerator:"moderator"===s?e=T.promotedToModerator:"user"===s&&(e=T.demotedToUser),e&&M.Z.success(o.formatMessage(e,{acct:a.acct}))})).catch((function(){}))}})},k=(0,n.vU)({userVerified:{id:"admin.users.user_verified_message",defaultMessage:"@{acct} was verified"},userUnverified:{id:"admin.users.user_unverified_message",defaultMessage:"@{acct} was unverified"},setDonorSuccess:{id:"admin.users.set_donor_message",defaultMessage:"@{acct} was set as a donor"},removeDonorSuccess:{id:"admin.users.remove_donor_message",defaultMessage:"@{acct} was removed as a donor"},userSuggested:{id:"admin.users.user_suggested_message",defaultMessage:"@{acct} was suggested"},userUnsuggested:{id:"admin.users.user_unsuggested_message",defaultMessage:"@{acct} was unsuggested"},badgesSaved:{id:"admin.users.badges_saved_message",defaultMessage:"Custom badges updated."}}),A=function(e){var a,n=e.onClose,b=e.accountId,w=(0,i.Z)(),T=(0,v.TL)(),A=(0,v.Tr)().account,D=(0,v.hz)(),S=(0,m.mA)(b).account,x=S?(0,p.ro)(S):[],H=(0,t.useState)(x),z=(0,d.Z)(H,2),E=z[0],I=z[1],N=function(){return n("ACCOUNT_MODERATION")};return S&&A?(0,s.Z)(_.u_,{title:(0,s.Z)(r.Z,{id:"account_moderation_modal.title",defaultMessage:"Moderate @{acct}",values:{acct:S.acct}}),onClose:N},void 0,(0,s.Z)(_.Kq,{space:4},void 0,(0,s.Z)(Z.Z,{},void 0,(0,s.Z)(l.Z,{account:S,showProfileHoverCard:!1,withLinkToProfile:!1,hideActions:!0})),(0,s.Z)(g.Z,{},void 0,A.admin&&(0,h.D0)(S)&&(0,s.Z)(g.H,{label:(0,s.Z)(r.Z,{id:"account_moderation_modal.fields.account_role",defaultMessage:"Staff level"})},void 0,(0,s.Z)("div",{className:"w-auto"},void 0,(0,s.Z)(U,{account:S}))),(0,s.Z)(g.H,{label:(0,s.Z)(r.Z,{id:"account_moderation_modal.fields.verified",defaultMessage:"Verified account"})},void 0,(0,s.Z)(_.ZD,{checked:S.verified,onChange:function(e){var a=e.target.checked,o=a?k.userVerified:k.userUnverified,s=a?c.A9:c.qx;T(s(S.id)).then((function(){return M.Z.success(w.formatMessage(o,{acct:S.acct}))})).catch((function(){}))}})),D.suggestionsV2&&(0,s.Z)(g.H,{label:(0,s.Z)(r.Z,{id:"account_moderation_modal.fields.suggested",defaultMessage:"Suggested in people to follow"})},void 0,(0,s.Z)(_.ZD,{checked:!0===(null===(a=S.pleroma)||void 0===a?void 0:a.is_suggested),onChange:function(e){var a=e.target.checked,o=a?k.userSuggested:k.userUnsuggested,s=a?c.Gy:c.g1;T(s([S.id])).then((function(){return M.Z.success(w.formatMessage(o,{acct:S.acct}))})).catch((function(){}))}})),(0,s.Z)(g.H,{label:(0,s.Z)(r.Z,{id:"account_moderation_modal.fields.badges",defaultMessage:"Custom badges"})},void 0,(0,s.Z)("div",{className:"grow"},void 0,(0,s.Z)(_.Ug,{className:"w-full",alignItems:"center",space:2},void 0,(0,s.Z)(C,{badges:E,onChange:I}),(0,s.Z)(_.zx,{onClick:function(){T((0,c.TW)(S.id,x,E)).then((function(){return M.Z.success(w.formatMessage(k.badgesSaved))})).catch((function(){}))}},void 0,(0,s.Z)(r.Z,{id:"save",defaultMessage:"Save"})))))),(0,s.Z)(g.Z,{},void 0,(0,s.Z)(g.H,{label:(0,s.Z)(r.Z,{id:"account_moderation_modal.fields.deactivate",defaultMessage:"Deactivate account"}),onClick:function(){T((0,u.yM)(w,S.id))}}),(0,s.Z)(g.H,{label:(0,s.Z)(r.Z,{id:"account_moderation_modal.fields.delete",defaultMessage:"Delete account"}),onClick:function(){T((0,u.rx)(w,S.id))}})),(0,s.Z)(_.xv,{theme:"subtle",size:"xs"},void 0,(0,s.Z)(r.Z,{id:"account_moderation_modal.info.id",defaultMessage:"ID: {id}",values:{id:S.id}})),D.adminFE&&(0,s.Z)(_.Ug,{justifyContent:"center"},void 0,(0,s.Z)(_.zx,{icon:o(224),size:"sm",theme:"secondary",onClick:function(){window.open("/pleroma/admin/#/users/".concat(S.id,"/"),"_blank")}},void 0,(0,s.Z)(r.Z,{id:"account_moderation_modal.admin_fe",defaultMessage:"Open in AdminFE"}))))):(0,s.Z)(_.u_,{onClose:N},void 0,(0,s.Z)(f.Z,{}))}}}]);
//# sourceMappingURL=account-moderation-modal-8f54c96bfc3d0777ef0a.chunk.js.map