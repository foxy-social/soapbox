"use strict";(self.webpackChunksoapbox=self.webpackChunksoapbox||[]).push([[5],{1147:function(i,t,e){e.r(t);var n=e(1202),a=(e(89),e(5),e(8),e(1)),o=e(2142),d=e(2112),u=e(2139),s=e(83),c=e(36),l=e(725),r=e(149),v=e(2),f=e(3),m=e(59),Z=e(666),p=function(i){var t=i.maxId,e=i.onLoadMore;return(0,n.Z)(l.Z,{onClick:function(){e(t)}})};t.default=function(){var i=(0,f.TL)(),t=(0,d.UO)().username,e=(0,c.wT)(t,{withRelationship:!0}),g=e.account,h=e.isLoading,I=e.isUnavailable,M=(0,f.CG)((function(i){return(0,m.Uq)(i,g.id)})),b=(0,f.CG)((function(i){var t;return null===(t=i.timelines.get("account:".concat(null==g?void 0:g.id,":media")))||void 0===t?void 0:t.isLoading})),x=(0,f.CG)((function(i){var t;return null===(t=i.timelines.get("account:".concat(null==g?void 0:g.id,":media")))||void 0===t?void 0:t.hasMore})),y=(0,f.CG)((function(i){var t;return null===(t=i.timelines.get("account:".concat(null==g?void 0:g.id,":media")))||void 0===t?void 0:t.next})),_=(0,a.useRef)(null),C=function(t){g&&i((0,s.fe)(g.id,{url:y,maxId:t}))},N=function(t){if("video"===t.type)i((0,u.h7)("VIDEO",{media:t,status:t.status,account:t.account}));else{var e=t.status.media_attachments,n=e.findIndex((function(i){return i.id===t.id}));i((0,u.h7)("MEDIA",{media:e,index:n,status:t.status}))}};if((0,a.useEffect)((function(){g&&i((0,s.fe)(g.id))}),[null==g?void 0:g.id]),h||!M&&b)return(0,n.Z)(v.sg,{},void 0,(0,n.Z)(v.$j,{}));if(!g)return(0,n.Z)(r.Z,{});var E=null;return!x||b&&0===M.size||(E=(0,n.Z)(l.Z,{className:"my-auto",visible:!b,onClick:function(i){i.preventDefault(),x&&C(M.size>0?M.last().status.id:void 0)}})),I?(0,n.Z)(v.sg,{},void 0,(0,n.Z)("div",{className:"empty-column-indicator"},void 0,(0,n.Z)(o.Z,{id:"empty_column.account_unavailable",defaultMessage:"Profile unavailable"}))):(0,n.Z)(v.sg,{label:"@".concat(g.acct),transparent:!0,withHeader:!1},void 0,a.createElement("div",{role:"feed",className:"grid grid-cols-2 gap-2 sm:grid-cols-3",ref:_},M.map((function(i,t){var e,a;return null===i?(0,n.Z)(p,{maxId:t>0&&(null===(a=M.get(t-1))||void 0===a?void 0:a.id)||null,onLoadMore:C},"more:"+(null===(e=M.get(t+1))||void 0===e?void 0:e.id)):(0,n.Z)(Z.Z,{attachment:i,onOpenMedia:N},"".concat(i.status.id,"+").concat(i.id))})),!b&&0===M.size&&(0,n.Z)("div",{className:"empty-column-indicator col-span-2 sm:col-span-3"},void 0,(0,n.Z)(o.Z,{id:"account_gallery.none",defaultMessage:"No media to show."})),E),b&&0===M.size&&(0,n.Z)("div",{className:"slist__append"},void 0,(0,n.Z)(v.$j,{})))}},1218:function(i,t,e){e.r(t);var n=e(1202),a=e(2111),o=(e(89),e(9),e(0),e(15),e(5),e(8),e(753)),d=e(1),u=e(2142),s=e(2139),c=e(83),l=e(2),r=e(3),v=e(59),f=e(666);t.default=function(i){var t,e=i.account,m=(0,r.TL)(),Z=(0,d.useState)(!0),p=(0,a.Z)(Z,2),g=p[0],h=p[1],I=(0,r.CG)((function(i){return e?(0,v.Uq)(i,null==e?void 0:e.id):(0,o.List)()})),M=function(i){if("video"===i.type)m((0,s.h7)("VIDEO",{media:i,status:i.status}));else{var t=i.getIn(["status","media_attachments"]),e=t.findIndex((function(t){return t.id===i.id}));m((0,s.h7)("MEDIA",{media:t,index:e,status:i.status}))}};return(0,d.useEffect)((function(){h(!0),e&&m((0,c.fe)(e.id)).then((function(){return h(!1)})).catch((function(){}))}),[null==e?void 0:e.id]),(0,n.Z)(l.$L,{title:(0,n.Z)(u.Z,{id:"media_panel.title",defaultMessage:"Media"})},void 0,e&&(0,n.Z)("div",{className:"w-full"},void 0,g?(0,n.Z)(l.$j,{}):(t=I.filter((function(i){return"public"===i.getIn(["status","visibility"])})).slice(0,9)).isEmpty()?(0,n.Z)(l.xv,{size:"sm",theme:"muted"},void 0,(0,n.Z)(u.Z,{id:"media_panel.empty_message",defaultMessage:"No media found."})):(0,n.Z)("div",{className:"grid grid-cols-3 gap-1"},void 0,t.map((function(i,t){return(0,n.Z)(f.Z,{attachment:i,onOpenMedia:M},"".concat(i.getIn(["status","id"]),"+").concat(i.id))})))))}}}]);
//# sourceMappingURL=account_gallery-21f63305e14962c7d7f1.chunk.js.map