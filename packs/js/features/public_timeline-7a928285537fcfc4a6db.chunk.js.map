{"version":3,"file":"packs/js/features/public_timeline-7a928285537fcfc4a6db.chunk.js","mappings":"6OAA2qBA,GAAS,QAAe,CAACC,MAAM,CAAC,GAAK,gBAAgB,eAAiB,sBAAsBC,QAAQ,CAAC,GAAK,wCAAwC,eAAiB,sBAAo9F,UAAx6F,WAA6B,IAAIC,GAAK,SAAcC,GAAS,UAAqBC,GAAS,UAAkBC,GAAS,UAAkBC,EAAUD,EAASE,MAAM,CAAC,SAAS,QAAQ,cAAkBC,GAAK,SAAe,SAASC,GAAO,IAAIC,EAAqB,OAA6D,QAAtDA,EAAqBD,EAAME,UAAUC,IAAI,iBAA0C,IAAvBF,OAA8B,EAAOA,EAAqBF,IAAK,IAAOK,EAAW,SAAaC,EAAuBT,EAASO,IAAI,kBAAsBG,EAAmBV,EAASO,IAAI,sBAAuqB,OAA/L,IAAAI,YAAU,WAAWb,GAAS,QAAqB,CAACG,UAAUA,KAAa,IAAIW,EAAWd,GAAS,QAAoB,CAACG,UAAUA,KAAa,OAAO,WAAWW,GAAa,CAAE,GAAE,CAACX,KAA+B,OAAK,KAAO,CAACY,UAAU,gBAAgBC,MAAMjB,EAAKkB,cAAcrB,EAASC,OAAOqB,aAAY,QAAM,GAAoB,OAAK,IAAkB,CAAC,GAAGN,IAAiC,OAAK,MAAM,CAACG,UAAU,aAAQ,GAAoB,OAAK,KAAU,CAACI,UAAsB,OAAK,IAAiB,CAACC,GAAG,sCAAsCC,eAAe,2BAA2BC,OAA9/B,WAAiCtB,GAAS,QAAc,CAAC,uBAAsB,GAAQ,EAAo8BuB,WAAW,EAAQ,IAAuBC,YAAYzB,EAAKkB,cAAcrB,EAASE,SAAS2B,SAASd,EAAuBe,SAApiC,SAA8BC,GAAS3B,GAAS,QAAc,CAAC,kBAAkB2B,GAAU,QAAw+B,GAAoB,OAAK,IAAiB,CAACP,GAAG,4CAA4CC,eAAe,wZAAyZO,OAAO,CAACC,WAAW5B,EAASJ,MAAMiC,OAAmB,OAAK,KAAK,CAACC,GAAG,wBAAmB,GAAoB,OAAK,IAAiB,CAACX,GAAG,8BAA8BC,eAAe,uBAAuBO,OAAO,CAACC,WAAW5B,EAASJ,gBAA4B,OAAK,IAAc,CAACmC,UAA3mD,WAAyB,OAAOhC,GAAS,QAAqB,CAACG,UAAUA,IAAa,QAA8iD,GAAoB,OAAK,IAAS,CAAC8B,UAAU,GAAGC,OAAOxB,EAAW,aAAaA,WAAW,GAAGwB,OAAOxB,GAAYwB,OAAO/B,EAAU,SAAS,IAAIgC,OAAO,OAAOC,WAA95D,SAAwBC,GAAOrC,GAAS,QAAqB,CAACsC,IAAIjC,EAAKgC,MAAMA,EAAMlC,UAAUA,IAAa,EAA80DoC,cAA0B,OAAK,IAAiB,CAACnB,GAAG,sBAAsBC,eAAe,+GAA+GmB,WAAW,WAAY,C","sources":["webpack://soapbox/./app/soapbox/features/public-timeline/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import React,{useEffect}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{Link}from'react-router-dom';import{changeSetting}from'soapbox/actions/settings';import{connectPublicStream}from'soapbox/actions/streaming';import{expandPublicTimeline}from'soapbox/actions/timelines';import PullToRefresh from'soapbox/components/pull-to-refresh';import{Accordion,Column}from'soapbox/components/ui';import{useAppSelector,useAppDispatch,useInstance,useSettings}from'soapbox/hooks';import PinnedHostsPicker from'../remote-timeline/components/pinned-hosts-picker';import Timeline from'../ui/components/timeline';var messages=defineMessages({title:{\"id\":\"column.public\",\"defaultMessage\":\"Fediverse timeline\"},dismiss:{\"id\":\"fediverse_tab.explanation_box.dismiss\",\"defaultMessage\":\"Don't show again\"}});var CommunityTimeline=function CommunityTimeline(){var intl=useIntl();var dispatch=useAppDispatch();var instance=useInstance();var settings=useSettings();var onlyMedia=settings.getIn(['public','other','onlyMedia']);var next=useAppSelector(function(state){var _state$timelines$get;return(_state$timelines$get=state.timelines.get('public'))===null||_state$timelines$get===void 0?void 0:_state$timelines$get.next;});var timelineId='public';var explanationBoxExpanded=settings.get('explanationBox');var showExplanationBox=settings.get('showExplanationBox');var dismissExplanationBox=function dismissExplanationBox(){dispatch(changeSetting(['showExplanationBox'],false));};var toggleExplanationBox=function toggleExplanationBox(setting){dispatch(changeSetting(['explanationBox'],setting));};var handleLoadMore=function handleLoadMore(maxId){dispatch(expandPublicTimeline({url:next,maxId:maxId,onlyMedia:onlyMedia}));};var handleRefresh=function handleRefresh(){return dispatch(expandPublicTimeline({onlyMedia:onlyMedia}));};useEffect(function(){dispatch(expandPublicTimeline({onlyMedia:onlyMedia}));var disconnect=dispatch(connectPublicStream({onlyMedia:onlyMedia}));return function(){disconnect();};},[onlyMedia]);return/*#__PURE__*/_jsx(Column,{className:\"-mt-3 sm:mt-0\",label:intl.formatMessage(messages.title),transparent:true},void 0,/*#__PURE__*/_jsx(PinnedHostsPicker,{}),showExplanationBox&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\"},void 0,/*#__PURE__*/_jsx(Accordion,{headline:/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.title\",defaultMessage:\"What is the Fediverse?\"}),action:dismissExplanationBox,actionIcon:require('@tabler/icons/x.svg'),actionLabel:intl.formatMessage(messages.dismiss),expanded:explanationBoxExpanded,onToggle:toggleExplanationBox},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"fediverse_tab.explanation_box.explanation\",defaultMessage:\"{site_title} is part of the Fediverse, a social network made up of thousands of independent social media sites (aka \\\"servers\\\"). The posts you see here are from 3rd-party servers. You have the freedom to engage with them, or to block any server you don't like. Pay attention to the full username after the second @ symbol to know which server a post is from. To see only {site_title} posts, visit {local}.\",values:{site_title:instance.title,local:/*#__PURE__*/_jsx(Link,{to:\"/timeline/local\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.home.local_tab\",defaultMessage:\"the {site_title} tab\",values:{site_title:instance.title}}))}}))),/*#__PURE__*/_jsx(PullToRefresh,{onRefresh:handleRefresh},void 0,/*#__PURE__*/_jsx(Timeline,{scrollKey:\"\".concat(timelineId,\"_timeline\"),timelineId:\"\".concat(timelineId).concat(onlyMedia?':media':''),prefix:\"home\",onLoadMore:handleLoadMore,emptyMessage:/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.public\",defaultMessage:\"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up\"}),divideType:\"space\"})));};export default CommunityTimeline;"],"names":["messages","title","dismiss","intl","dispatch","instance","settings","onlyMedia","getIn","next","state","_state$timelines$get","timelines","get","timelineId","explanationBoxExpanded","showExplanationBox","useEffect","disconnect","className","label","formatMessage","transparent","headline","id","defaultMessage","action","actionIcon","actionLabel","expanded","onToggle","setting","values","site_title","local","to","onRefresh","scrollKey","concat","prefix","onLoadMore","maxId","url","emptyMessage","divideType"],"sourceRoot":""}