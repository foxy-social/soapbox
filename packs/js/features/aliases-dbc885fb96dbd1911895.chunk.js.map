{"version":3,"file":"packs/js/features/aliases-dbc885fb96dbd1911895.chunk.js","mappings":"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","sources":["webpack://soapbox/./app/soapbox/features/aliases/components/account.tsx","webpack://soapbox/./app/soapbox/features/aliases/components/search.tsx","webpack://soapbox/./app/soapbox/features/aliases/index.tsx"],"sourcesContent":["import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.array.includes.js\";import\"core-js/modules/es.string.includes.js\";import React from'react';import{defineMessages,useIntl}from'react-intl';import{addToAliases}from'soapbox/actions/aliases';import{useAccount}from'soapbox/api/hooks';import AccountComponent from'soapbox/components/account';import IconButton from'soapbox/components/icon-button';import{HStack}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useFeatures}from'soapbox/hooks';var messages=defineMessages({add:{\"id\":\"aliases.account.add\",\"defaultMessage\":\"Create alias\"}});var Account=function Account(_ref){var _account$pleroma;var accountId=_ref.accountId,aliases=_ref.aliases;var intl=useIntl();var dispatch=useAppDispatch();var features=useFeatures();var me=useAppSelector(function(state){return state.me;});var _useAccount=useAccount(accountId),account=_useAccount.account;var apId=account===null||account===void 0?void 0:(_account$pleroma=account.pleroma)===null||_account$pleroma===void 0?void 0:_account$pleroma.ap_id;var name=features.accountMoving?account===null||account===void 0?void 0:account.acct:apId;var added=name?aliases.includes(name):false;var handleOnAdd=function handleOnAdd(){return dispatch(addToAliases(account));};if(!account)return null;var button;if(!added&&accountId!==me){button=/*#__PURE__*/_jsx(IconButton,{src:require('@tabler/icons/plus.svg'),iconClassName:\"h-5 w-5\",title:intl.formatMessage(messages.add),onClick:handleOnAdd});}return/*#__PURE__*/_jsx(HStack,{space:1,alignItems:\"center\",justifyContent:\"between\",className:\"p-2.5\"},void 0,/*#__PURE__*/_jsx(\"div\",{className:\"w-full\"},void 0,/*#__PURE__*/_jsx(AccountComponent,{account:account,withRelationship:false})),button);};export default Account;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import\"core-js/modules/es.regexp.exec.js\";import\"core-js/modules/es.string.search.js\";import clsx from'clsx';import React from'react';import{defineMessages,useIntl}from'react-intl';import{fetchAliasesSuggestions,clearAliasesSuggestions,changeAliasesSuggestions}from'soapbox/actions/aliases';import Icon from'soapbox/components/icon';import{Button}from'soapbox/components/ui';import{useAppDispatch,useAppSelector}from'soapbox/hooks';var messages=defineMessages({search:{\"id\":\"aliases.search\",\"defaultMessage\":\"Search your old account\"},searchTitle:{\"id\":\"tabs_bar.search\",\"defaultMessage\":\"Search\"}});var Search=function Search(){var dispatch=useAppDispatch();var intl=useIntl();var value=useAppSelector(function(state){return state.aliases.suggestions.value;});var handleChange=function handleChange(e){dispatch(changeAliasesSuggestions(e.target.value));};var handleKeyUp=function handleKeyUp(e){if(e.keyCode===13){dispatch(fetchAliasesSuggestions(value));}};var handleSubmit=function handleSubmit(){dispatch(fetchAliasesSuggestions(value));};var handleClear=function handleClear(){dispatch(clearAliasesSuggestions());};var hasValue=value.length>0;return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-1\"},void 0,/*#__PURE__*/_jsx(\"label\",{className:\"relative grow\"},void 0,/*#__PURE__*/_jsx(\"span\",{style:{display:'none'}},void 0,intl.formatMessage(messages.search)),/*#__PURE__*/_jsx(\"input\",{className:\"block w-full rounded-full focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500 sm:text-sm\",type:\"text\",value:value,onChange:handleChange,onKeyUp:handleKeyUp,placeholder:intl.formatMessage(messages.search)}),/*#__PURE__*/_jsx(\"div\",{role:\"button\",tabIndex:hasValue?0:-1,className:\"search__icon\",onClick:handleClear},void 0,/*#__PURE__*/_jsx(Icon,{src:require('@tabler/icons/backspace.svg'),\"aria-label\":intl.formatMessage(messages.search),className:clsx('svg-icon--backspace',{active:hasValue})}))),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit},void 0,intl.formatMessage(messages.searchTitle)));};export default Search;","import _jsx from\"@babel/runtime/helpers/esm/jsx\";import _toConsumableArray from\"@babel/runtime/helpers/esm/toConsumableArray\";import\"core-js/modules/es.array.map.js\";import React,{useEffect}from'react';import{defineMessages,FormattedMessage,useIntl}from'react-intl';import{fetchAliases,removeFromAliases}from'soapbox/actions/aliases';import Icon from'soapbox/components/icon';import ScrollableList from'soapbox/components/scrollable-list';import{CardHeader,CardTitle,Column,HStack,Text}from'soapbox/components/ui';import{useAppDispatch,useAppSelector,useFeatures,useOwnAccount}from'soapbox/hooks';import Account from'./components/account';import Search from'./components/search';var messages=defineMessages({heading:{\"id\":\"column.aliases\",\"defaultMessage\":\"Account aliases\"},subheading_add_new:{\"id\":\"column.aliases.subheading_add_new\",\"defaultMessage\":\"Add New Alias\"},create_error:{\"id\":\"column.aliases.create_error\",\"defaultMessage\":\"Error creating alias\"},delete_error:{\"id\":\"column.aliases.delete_error\",\"defaultMessage\":\"Error deleting alias\"},subheading_aliases:{\"id\":\"column.aliases.subheading_aliases\",\"defaultMessage\":\"Current aliases\"},delete:{\"id\":\"column.aliases.delete\",\"defaultMessage\":\"Delete\"}});var Aliases=function Aliases(){var intl=useIntl();var dispatch=useAppDispatch();var features=useFeatures();var _useOwnAccount=useOwnAccount(),account=_useOwnAccount.account;var aliases=useAppSelector(function(state){if(features.accountMoving){return _toConsumableArray(state.aliases.aliases.items);}else{var _account$pleroma$also,_account$pleroma;return(_account$pleroma$also=account===null||account===void 0?void 0:(_account$pleroma=account.pleroma)===null||_account$pleroma===void 0?void 0:_account$pleroma.also_known_as)!==null&&_account$pleroma$also!==void 0?_account$pleroma$also:[];}});var searchAccountIds=useAppSelector(function(state){return state.aliases.suggestions.items;});var loaded=useAppSelector(function(state){return state.aliases.suggestions.loaded;});useEffect(function(){dispatch(fetchAliases);},[]);var handleFilterDelete=function handleFilterDelete(e){dispatch(removeFromAliases(e.currentTarget.dataset.value));};var emptyMessage=/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases\",defaultMessage:\"You haven't created any account alias yet.\"});return/*#__PURE__*/_jsx(Column,{className:\"aliases-settings-panel\",label:intl.formatMessage(messages.heading)},void 0,/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_add_new)})),/*#__PURE__*/_jsx(Search,{}),loaded&&searchAccountIds.size===0?/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts empty-column-indicator\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"empty_column.aliases.suggestions\",defaultMessage:\"There are no account suggestions available for the provided term.\"})):/*#__PURE__*/_jsx(\"div\",{className:\"aliases__accounts mb-4\"},void 0,searchAccountIds.map(function(accountId){return/*#__PURE__*/_jsx(Account,{accountId:accountId,aliases:aliases},accountId);})),/*#__PURE__*/_jsx(CardHeader,{},void 0,/*#__PURE__*/_jsx(CardTitle,{title:intl.formatMessage(messages.subheading_aliases)})),/*#__PURE__*/_jsx(\"div\",{className:\"aliases-settings-panel\"},void 0,/*#__PURE__*/_jsx(ScrollableList,{scrollKey:\"aliases\",emptyMessage:emptyMessage},void 0,aliases.map(function(alias,i){return/*#__PURE__*/_jsx(HStack,{alignItems:\"center\",justifyContent:\"between\",space:1,className:\"p-2\"},i,/*#__PURE__*/_jsx(\"div\",{},void 0,/*#__PURE__*/_jsx(Text,{tag:\"span\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.account_label\",defaultMessage:\"Old account:\"})),' ',/*#__PURE__*/_jsx(Text,{tag:\"span\"},void 0,alias)),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",role:\"button\",tabIndex:0,onClick:handleFilterDelete,\"data-value\":alias,\"aria-label\":intl.formatMessage(messages.delete)},void 0,/*#__PURE__*/_jsx(Icon,{className:\"mr-1.5\",src:require('@tabler/icons/x.svg')}),/*#__PURE__*/_jsx(Text,{weight:\"bold\",theme:\"muted\"},void 0,/*#__PURE__*/_jsx(FormattedMessage,{id:\"aliases.aliases_list_delete\",defaultMessage:\"Unlink alias\"}))));}))));};export default Aliases;"],"names":["messages","add","_ref","_account$pleroma","button","accountId","aliases","intl","useIntl","dispatch","features","me","state","account","apId","pleroma","ap_id","name","accountMoving","acct","added","includes","src","iconClassName","title","formatMessage","onClick","space","alignItems","justifyContent","className","withRelationship","search","searchTitle","value","suggestions","hasValue","length","style","display","type","onChange","e","target","onKeyUp","keyCode","placeholder","role","tabIndex","active","heading","subheading_add_new","create_error","delete_error","subheading_aliases","delete","items","_account$pleroma$also","also_known_as","searchAccountIds","loaded","useEffect","handleFilterDelete","currentTarget","dataset","emptyMessage","id","defaultMessage","label","size","map","scrollKey","alias","i","tag","theme","weight"],"sourceRoot":""}